# Write out a header config file for the perl5i C wrapper.

use strict;
use warnings;
use File::Spec;

my $file = shift;

# Its going inside double quotes.
my $perl_path = $^X;
$perl_path =~ s{ ([\\"]) }{\\$1}gx;

my $tempdir = File::Spec->tmpdir || "/tmp";

open my $fh, ">", $file or die $!;
printf $fh <<"END";
/* THIS FILE IS GENERATED BY $0
 * Any changes here will be wiped out.  Edit it there instead.
 */

const char Perl_Path[] = "$perl_path";
const char Temp_Template[]  = "$tempdir/perl5i.XXXXXXXX";
END
